---
// Top bar - EXACT match to WordPress Elementor header
// Container: 1280px, Icons: 23px #23C3FF, Text: Jost 14px/500, Gap: 50px
import GoogleReviewsBadge from './GoogleReviewsBadge.astro';
---

<div class="top-bar" id="header-top-bar">
  <div class="top-bar-inner">
    <div class="top-bar-container">
      <!-- Service Features - Left Side -->
      <ul class="service-list">
        <li class="service-item">
          <span class="service-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 256 256"><path d="M200.77,53.89A103.27,103.27,0,0,0,128,24h-1.07A104,104,0,0,0,24,128c0,43,26.58,79.06,69.36,94.17A32,32,0,0,0,136,192a16,16,0,0,1,16-16h46.21a31.81,31.81,0,0,0,31.2-24.88,104.43,104.43,0,0,0,2.59-24A103.28,103.28,0,0,0,200.77,53.89Zm13,93.71A15.89,15.89,0,0,1,198.21,160H152a32,32,0,0,0-32,32,16,16,0,0,1-21.31,15.07C62.49,194.3,40,164,40,128a88,88,0,0,1,87.09-88h.9a88.35,88.35,0,0,1,88,87.25A88.86,88.86,0,0,1,213.81,147.6ZM140,76a12,12,0,1,1-12-12A12,12,0,0,1,140,76ZM96,100A12,12,0,1,1,84,88,12,12,0,0,1,96,100Zm0,56a12,12,0,1,1-12-12A12,12,0,0,1,96,156Zm88-56a12,12,0,1,1-12-12A12,12,0,0,1,184,100Z"></path></svg>
          </span>
          <span class="service-text">Free Design Service</span>
        </li>
        <li class="service-item">
          <span class="service-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 256 256"><path d="M255.42,117l-14-35A15.93,15.93,0,0,0,226.58,72H192V64a8,8,0,0,0-8-8H32A16,16,0,0,0,16,72V184a16,16,0,0,0,16,16H49a32,32,0,0,0,62,0h50a32,32,0,0,0,62,0h17a16,16,0,0,0,16-16V120A7.94,7.94,0,0,0,255.42,117ZM192,88h34.58l9.6,24H192ZM32,72H176v64H32ZM80,208a16,16,0,1,1,16-16A16,16,0,0,1,80,208Zm81-24H111a32,32,0,0,0-62,0H32V152H176v12.31A32.11,32.11,0,0,0,161,184Zm31,24a16,16,0,1,1,16-16A16,16,0,0,1,192,208Zm48-24H223a32.06,32.06,0,0,0-31-24V128h48Z"></path></svg>
          </span>
          <span class="service-text">Free Delivery</span>
        </li>
        <li class="service-item">
          <span class="service-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 256 256"><path d="M232,64H208V48a8,8,0,0,0-8-8H56a8,8,0,0,0-8,8V64H24A16,16,0,0,0,8,80V96a40,40,0,0,0,40,40h3.65A80.13,80.13,0,0,0,120,191.61V216H96a8,8,0,0,0,0,16h64a8,8,0,0,0,0-16H136V191.58c31.94-3.23,58.44-25.64,68.08-55.58H208a40,40,0,0,0,40-40V80A16,16,0,0,0,232,64ZM48,120A24,24,0,0,1,24,96V80H48v32q0,4,.39,8Zm144-8.9c0,35.52-29,64.64-64,64.9a64,64,0,0,1-64-64V56H192ZM232,96a24,24,0,0,1-24,24h-.5a81.81,81.81,0,0,0,.5-8.9V80h24Z"></path></svg>
          </span>
          <span class="service-text">90%+ Made in Europe</span>
        </li>
        <li class="service-item">
          <a href="/collections/sustainable/">
            <span class="service-icon sustainable">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none"><path d="M27.9308 5.00875C27.9165 4.76411 27.8129 4.53323 27.6396 4.35994C27.4664 4.18666 27.2355 4.08304 26.9908 4.06875C17.4746 3.51 9.85208 6.375 6.60208 11.75C5.47554 13.5886 4.9204 15.7204 5.00708 17.875C5.07833 19.865 5.65833 21.875 6.73083 23.8563L4.29208 26.2938C4.10444 26.4814 3.99902 26.7359 3.99902 27.0012C3.99902 27.2666 4.10444 27.5211 4.29208 27.7087C4.47972 27.8964 4.73422 28.0018 4.99958 28.0018C5.26494 28.0018 5.51944 27.8964 5.70708 27.7087L8.14458 25.27C10.1246 26.3413 12.1358 26.9213 14.1246 26.9925C14.2637 26.9975 14.4025 27 14.5408 27C16.5555 27.0054 18.532 26.4506 20.2496 25.3975C25.6246 22.1475 28.4908 14.5263 27.9308 5.00875ZM19.2183 23.6875C16.3746 25.41 13.0083 25.4375 9.62958 23.7838L20.7083 12.7063C20.8012 12.6133 20.8749 12.503 20.9252 12.3816C20.9755 12.2603 21.0014 12.1301 21.0014 11.9987C21.0014 11.8674 20.9755 11.7372 20.9252 11.6159C20.8749 11.4945 20.8012 11.3842 20.7083 11.2913C20.6154 11.1983 20.5051 11.1246 20.3837 11.0744C20.2623 11.0241 20.1322 10.9982 20.0008 10.9982C19.8694 10.9982 19.7393 11.0241 19.6179 11.0744C19.4965 11.1246 19.3862 11.1983 19.2933 11.2913L8.21583 22.375C6.56708 19 6.59083 15.625 8.31208 12.7863C11.0733 8.2275 17.6371 5.73125 25.9758 6.02875C26.2746 14.3613 23.7771 20.9262 19.2183 23.6875Z" fill="#10A380"></path></svg>
            </span>
            <span class="service-text">Sustainable Merch Available</span>
          </a>
        </li>
      </ul>

      <!-- Google Reviews - Right Side (Dynamic Badge) -->
      <div class="google-reviews google-reviews-link">
        <GoogleReviewsBadge width={154} />
      </div>
    </div>
  </div>
</div>

<script is:inline>
  // Google Reviews link handler - smart scrolling/redirect
  // Works across all pages - scrolls to reviews if present, redirects to homepage otherwise
  (function() {
    var reviewsLinks = document.querySelectorAll('.google-reviews-link');

    reviewsLinks.forEach(function(link) {
      link.addEventListener('click', function(e) {
        var reviewSection = document.getElementById('review-section');

        if (reviewSection) {
          // Reviews section exists on this page - smooth scroll to it
          e.preventDefault();
          reviewSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          // Update URL hash without triggering page jump
          if (history.pushState) {
            history.pushState(null, null, '#review-section');
          }
        } else {
          // Reviews section does NOT exist - redirect to homepage with hash
          e.preventDefault();
          window.location.href = '/#review-section';
        }
      });
    });

    // Handle page load with hash - smooth scroll if section exists
    function handleHashOnLoad() {
      if (window.location.hash === '#review-section') {
        var reviewSection = document.getElementById('review-section');
        if (reviewSection) {
          // Small delay to ensure page is fully loaded
          setTimeout(function() {
            reviewSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }, 100);
        }
      }
    }

    // Run on DOMContentLoaded and also check immediately if already loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', handleHashOnLoad);
    } else {
      handleHashOnLoad();
    }
  })();
</script>

<style>
  .top-bar {
    background-color: #253461;
    font-family: 'Jost', sans-serif;
  }

  .top-bar-inner {
    padding: 4px 0 8px 0;
  }

  .top-bar-container {
    width: 100%;
    max-width: 1280px;
    margin: 0 auto;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .service-list {
    display: flex;
    align-items: center;
    list-style: none;
    margin: 0 -25px;
    padding: 4px 0 0 0;
  }

  .service-item {
    display: flex;
    align-items: center;
    margin: 0 25px;
    font-size: 14px;
    font-weight: 500;
    line-height: 1.4;
    color: #ffffff;
  }

  .service-item a {
    display: flex;
    align-items: center;
    color: #ffffff;
    text-decoration: none;
    transition: color 0.3s;
  }

  .service-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-right: 11px;
  }

  .service-icon svg {
    width: 23px;
    height: 23px;
    fill: #23C3FF;
    transition: fill 0.3s;
  }

  .service-icon.sustainable svg {
    fill: #10A380;
  }

  .service-text {
    white-space: nowrap;
    color: #ffffff;
    transition: color 0.3s;
  }

  .google-reviews {
    display: flex;
    align-items: center;
    text-decoration: none;
    flex-shrink: 0;
  }

  .google-reviews img {
    width: 154px;
    height: auto;
    aspect-ratio: 306 / 36;
  }

  @media (max-width: 1200px) {
    .service-list {
      margin: 0 -15px;
    }
    .service-item {
      margin: 0 15px;
      font-size: 13px;
    }
    .service-icon svg {
      width: 20px;
      height: 20px;
    }
  }

  @media (max-width: 1024px) {
    .service-item:nth-child(4) {
      display: none;
    }
  }

  @media (max-width: 900px) {
    .service-item:nth-child(3) .service-text {
      display: none;
    }
    .service-item:nth-child(3)::after {
      content: 'Made in Europe';
      font-size: 13px;
      color: #ffffff;
    }
  }

  @media (max-width: 768px) {
    .top-bar {
      display: none;
    }
  }
</style>
